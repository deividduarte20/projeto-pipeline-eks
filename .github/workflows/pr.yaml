name: Terraform EKS Pipeline

on:
  pull_request:

jobs:
  terraform-eks:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout do Código
      uses: actions/checkout@v2

    - name: Entrar no Diretório terraform-eks
      run: cd terraform-eks

    - name: Inicializar Terraform
      run: terraform init

    - name: Formatar arquivos Terraform
      run: terraform fmt -recursive

    - name: Executar Terraform Plan
      run: terraform plan -out=tfplan

    - name: Mostrar Saída do Terraform Plan
      run: cat tfplan
