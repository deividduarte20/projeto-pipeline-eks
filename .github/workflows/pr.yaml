name: Terraform EKS Pipeline

on:
  pull_request:

jobs:
  terraform-eks:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout do Código
      uses: actions/checkout@v4.1.1
    
    - name: Listar Diretórios e Arquivos
      run: |
        ls -la
        cd ..
        ls -la
        cd projeto-pipeline-eks
        ls -la
        cd terraform-eks
        ls -la

    - name: Entrar no Diretório terraform-eks
      run: cd projeto-pipeline-eks/terraform-eks

    - name: Inicializar Terraform
      run: terraform init

    - name: Formatar arquivos Terraform
      run: terraform fmt -recursive

    - name: Executar Terraform Plan
      run: terraform plan
